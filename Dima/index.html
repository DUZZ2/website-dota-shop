// ====================================
// Ğ“Ğ›ĞĞ‘ĞĞ›Ğ¬ĞĞ† Ğ—ĞœĞ†ĞĞĞ† Ğ¢Ğ ĞšĞĞĞ¤Ğ†Ğ“Ğ£Ğ ĞĞ¦Ğ†Ğ¯
// ====================================
let cart = []; 
const productsData = []; 

// Ğ•Ğ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¸ DOM
// ... (Ğ½Ğµ Ğ·Ğ¼Ñ–Ğ½ÑÑÑ‚ÑŒÑÑ)
const cartIconLink = document.getElementById('cart-icon-link'); 
const cartModal = document.getElementById('cart-modal');
const closeModalBtn = document.querySelector('.modal .close-btn');
const cartItemsList = document.getElementById('cart-items-list');
const cartTotalElement = document.getElementById('cart-total');
const checkoutBtn = document.getElementById('checkout-btn');
const searchInput = document.querySelector('.search-input');
const navItems = document.querySelectorAll('.nav-item'); 
const productSections = document.querySelectorAll('.products-section'); 


// ====================================
// 1. Ğ†ĞĞ†Ğ¦Ğ†ĞĞ›Ğ†Ğ—ĞĞ¦Ğ†Ğ¯ Ğ”ĞĞĞ˜Ğ¥ Ğ¢ĞĞ’ĞĞ Ğ†Ğ’ (Ğ”Ğ›Ğ¯ ĞŸĞĞ¨Ğ£ĞšĞ£)
// ====================================

function initializeProductsData() {
Â  Â  // Ğ—Ğ±Ğ¸Ñ€Ğ°Ñ”Ğ¼Ğ¾ Ğ´Ğ°Ğ½Ñ– Ğ¿Ñ€Ğ¾ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¸ Ğ· ÑƒÑÑ–Ñ… ÑĞµĞºÑ†Ñ–Ğ¹. Ğ›Ğ¾Ğ³Ñ–ĞºĞ° Ğ·Ğ°Ğ»Ğ¸ÑˆĞ°Ñ”Ñ‚ÑŒÑÑ Ñ‚Ğ° ÑĞ°Ğ¼Ğ°.
Â  Â  document.querySelectorAll('.product-card').forEach(card => {
Â  Â  Â  Â  const name = card.querySelector('.product-name').textContent.trim();
Â  Â  Â  Â  // Ğ’Ñ€Ğ°Ñ…Ğ¾Ğ²ÑƒÑ”Ğ¼Ğ¾ "sale" Ñ†Ñ–Ğ½Ğ¸
Â  Â  Â  Â  const priceText = card.querySelector('.product-price').textContent.replace('$', '').trim().split(' ')[0]; 
Â  Â  Â  Â  const price = parseFloat(priceText);
Â  Â  Â  Â  
Â  Â  Â  Â  productsData.push({ name, price, cardElement: card });
Â  Â  });
}

// ====================================
// 2. Ğ›ĞĞ“Ğ†ĞšĞ ĞšĞĞ¨Ğ˜ĞšĞ (CART LOGIC)
// ====================================

function updateCartIcon() {
Â  Â  const cartItemCount = cart.reduce((total, item) => total + item.quantity, 0);
Â  Â  cartIconLink.textContent = cartItemCount > 0 ? `ğŸ›’ (${cartItemCount})` : 'ğŸ›’';
}

function renderCart() {
Â  Â  cartItemsList.innerHTML = '';
Â  Â  let total = 0;

Â  Â  if (cart.length === 0) {
Â  Â  Â  Â  cartItemsList.innerHTML = '<p class="empty-cart-message">ĞšĞ¾ÑˆĞ¸Ğº Ğ¿Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ñ–Ğ¹.</p>';
Â  Â  } else {
Â  Â  Â  Â  cart.forEach((item, index) => {
Â  Â  Â  Â  Â  Â  const itemTotal = item.price * item.quantity;
Â  Â  Â  Â  Â  Â  total += itemTotal;

Â  Â  Â  Â  Â  Â  const cartItemHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  <div class="cart-item">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="item-name">${item.name}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="item-quantity">ĞšÑ–Ğ»ÑŒĞºÑ–ÑÑ‚ÑŒ: ${item.quantity}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="item-price">${itemTotal.toFixed(2)} $</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="btn-remove-item" data-index="${index}">Ğ’Ğ¸Ğ´Ğ°Ğ»Ğ¸Ñ‚Ğ¸</button>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  cartItemsList.innerHTML += cartItemHTML;
Â  Â  Â  Â  });
Â  Â  }

Â  Â  cartTotalElement.textContent = total.toFixed(2) + ' $';
Â  Â  updateCartIcon();
}

// ĞĞ±Ñ€Ğ¾Ğ±Ğ½Ğ¸Ğº ĞºĞ»Ñ–ĞºÑƒ Ğ´Ğ»Ñ Ğ´Ğ¾Ğ´Ğ°Ğ²Ğ°Ğ½Ğ½Ñ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñƒ
document.querySelectorAll('.btn-add-to-cart').forEach(button => {
Â  Â  button.addEventListener('click', (event) => {
Â  Â  Â  Â  const productCard = event.target.closest('.product-card');
Â  Â  Â  Â  const productName = productCard.querySelector('.product-name').textContent.trim();
Â  Â  Â  Â  const priceText = productCard.querySelector('.product-price').textContent.replace('$', '').trim().split(' ')[0];
Â  Â  Â  Â  const price = parseFloat(priceText);
        // ĞÑ‚Ñ€Ğ¸Ğ¼Ğ°Ğ½Ğ½Ñ Ğ¾Ğ¿Ğ¸ÑÑƒ Ğ´Ğ»Ñ Ğ»Ğ¾Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ğ°Ğ±Ğ¾ Ğ¿Ğ¾Ğ´Ğ°Ğ»ÑŒÑˆĞ¾Ğ³Ğ¾ Ğ²Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ°Ğ½Ğ½Ñ
        const productDescription = productCard.querySelector('.product-description')?.textContent.trim() || 'Ğ‘ĞµĞ· Ğ¾Ğ¿Ğ¸ÑÑƒ';


Â  Â  Â  Â  const existingItem = cart.find(item => item.name === productName);

Â  Â  Â  Â  if (existingItem) {
Â  Â  Â  Â  Â  Â  existingItem.quantity++;
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  cart.push({ name: productName, price: price, quantity: 1, description: productDescription });
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  console.log(`${productName} Ğ´Ğ¾Ğ´Ğ°Ğ½Ğ¾ Ğ´Ğ¾ ĞºĞ¾ÑˆĞ¸ĞºĞ°.`);
Â  Â  Â  Â  updateCartIcon();
Â  Â  });
});

// ĞĞ±Ñ€Ğ¾Ğ±Ğ½Ğ¸ĞºĞ¸ Ğ´Ğ»Ñ Ğ¼Ğ¾Ğ´Ğ°Ğ»ÑŒĞ½Ğ¾Ğ³Ğ¾ Ğ²Ñ–ĞºĞ½Ğ°
cartIconLink.addEventListener('click', (e) => {
Â  Â  e.preventDefault();
Â  Â  renderCart(); 
Â  Â  cartModal.style.display = 'block';
});

closeModalBtn.addEventListener('click', () => {
Â  Â  cartModal.style.display = 'none';
});

checkoutBtn.addEventListener('click', () => {
Â  Â  if (cart.length > 0) {
Â  Â  Â  Â  const totalAmount = cart.reduce((sum, item) => sum + item.price * item.quantity, 0).toFixed(2);
Â  Â  Â  Â  alert(`ğŸ‰ Ğ—Ğ°Ğ¼Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ½Ğ° ÑÑƒĞ¼Ñƒ ${totalAmount} $ ÑƒÑĞ¿Ñ–ÑˆĞ½Ğ¾ Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ¾! Ğ”ÑĞºÑƒÑ”Ğ¼Ğ¾! ğŸ“¦`);
Â  Â  Â  Â  cart = []; 
Â  Â  Â  Â  cartModal.style.display = 'none';
Â  Â  Â  Â  renderCart();
Â  Â  } else {
Â  Â  Â  Â  alert('ĞšĞ¾ÑˆĞ¸Ğº Ğ¿Ğ¾Ñ€Ğ¾Ğ¶Ğ½Ñ–Ğ¹! Ğ”Ğ¾Ğ´Ğ°Ğ¹Ñ‚Ğµ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¸ Ğ´Ğ»Ñ Ğ¾Ñ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ½Ñ Ğ·Ğ°Ğ¼Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ.');
Â  Â  }
});

cartItemsList.addEventListener('click', (e) => {
Â  Â  if (e.target.classList.contains('btn-remove-item')) {
Â  Â  Â  Â  const indexToRemove = parseInt(e.target.dataset.index);
Â  Â  Â  Â  cart.splice(indexToRemove, 1);
Â  Â  Â  Â  renderCart();
Â  Â  Â  Â  console.log('Ğ¢Ğ¾Ğ²Ğ°Ñ€ Ğ²Ğ¸Ğ´Ğ°Ğ»ĞµĞ½Ğ¾ Ğ· ĞºĞ¾ÑˆĞ¸ĞºĞ°.');
Â  Â  }
});

window.addEventListener('click', (event) => {
Â  Â  if (event.target === cartModal) {
Â  Â  Â  Â  cartModal.style.display = 'none';
Â  Â  }
});


// ====================================
// 3. Ğ›ĞĞ“Ğ†ĞšĞ ĞŸĞĞ¨Ğ£ĞšĞ£ (SEARCH LOGIC)
// ====================================

searchInput.addEventListener('input', () => {
Â  Â  const searchTerm = searchInput.value.toLowerCase().trim();

Â  Â  // ĞŸĞµÑ€ĞµĞ±Ğ¸Ñ€Ğ°Ñ”Ğ¼Ğ¾ Ğ²ÑÑ– Ğ´Ğ°Ğ½Ñ– Ğ¿Ñ€Ğ¾ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¸ Ñ– Ğ²Ğ¸Ñ€Ñ–ÑˆÑƒÑ”Ğ¼Ğ¾, Ñ‡Ğ¸ Ğ¿Ğ¾ĞºĞ°Ğ·ÑƒĞ²Ğ°Ñ‚Ğ¸ ĞºĞ°Ñ€Ñ‚ĞºÑƒ
Â  Â  productsData.forEach(product => {
Â  Â  Â  Â  const productNameLower = product.name.toLowerCase();
Â  Â  Â  Â  
Â  Â  Â  Â  // Ğ—Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ±Ğ°Ñ‚ÑŒĞºÑ–Ğ²ÑÑŒĞºĞ¸Ğ¹ product-grid Ğ´Ğ»Ñ Ğ²Ñ–Ğ´Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ
Â  Â  Â  Â  const productGridElement = product.cardElement.closest('.product-grid');

Â  Â  Â  Â  if (productNameLower.includes(searchTerm)) {
Â  Â  Â  Â  Â  Â  product.cardElement.style.display = 'flex'; 
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  product.cardElement.style.display = 'none';
Â  Â  Â  Â  }
Â  Â  });

Â  Â  // Ğ›Ğ¾Ğ³Ñ–ĞºĞ° Ğ²Ñ–Ğ´Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ "ĞÑ–Ñ‡Ğ¾Ğ³Ğ¾ Ğ½Ğµ Ğ·Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾"
Â  Â  // ĞÑĞºÑ–Ğ»ÑŒĞºĞ¸ Ğ¼Ğ¸ Ğ·Ğ¼Ñ–Ğ½Ğ¸Ğ»Ğ¸ ÑÑ–Ñ‚ĞºÑƒ, Ñ€Ğ¾Ğ±Ğ¸Ğ¼Ğ¾ Ğ¿ĞµÑ€ĞµĞ²Ñ–Ñ€ĞºÑƒ Ğ½Ğ° Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ñ–ÑÑ‚ÑŒ Ñƒ Ğ²ÑÑ–Ğ¹ ÑĞµĞºÑ†Ñ–Ñ—
Â  Â  const allCards = document.querySelectorAll('.product-card');
Â  Â  const visibleCards = Array.from(allCards).filter(card => card.style.display !== 'none');

Â  Â  let noResults = document.getElementById('no-results-message');

Â  Â  if (visibleCards.length === 0 && searchTerm.length > 0) {
Â  Â  Â  Â  if (!noResults) {
Â  Â  Â  Â  Â  Â  noResults = document.createElement('p');
Â  Â  Â  Â  Â  Â  noResults.id = 'no-results-message';
Â  Â  Â  Â  Â  Â  noResults.textContent = `Ğ—Ğ° Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼ "${searchTerm}" Ğ½Ñ–Ñ‡Ğ¾Ğ³Ğ¾ Ğ½Ğµ Ğ·Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾. ğŸ˜¥`;
Â  Â  Â  Â  Â  Â  // Ğ”Ğ¾Ğ´Ğ°Ñ”Ğ¼Ğ¾ Ğ¹Ğ¾Ğ³Ğ¾ Ğ´Ğ¾ Ğ¿ĞµÑ€ÑˆĞ¾Ñ— ÑĞµĞºÑ†Ñ–Ñ— Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ–Ğ²
Â  Â  Â  Â  Â  Â  document.querySelector('.products-section').appendChild(noResults); 
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  noResults.textContent = `Ğ—Ğ° Ğ·Ğ°Ğ¿Ğ¸Ñ‚Ğ¾Ğ¼ "${searchTerm}" Ğ½Ñ–Ñ‡Ğ¾Ğ³Ğ¾ Ğ½Ğµ Ğ·Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾. ğŸ˜¥`;
Â  Â  Â  Â  }
Â  Â  } else {
Â  Â  Â  Â  if (noResults) {
Â  Â  Â  Â  Â  Â  noResults.remove();
Â  Â  Â  Â  }
Â  Â  }
});


// ====================================
// 4. Ğ›ĞĞ“Ğ†ĞšĞ ĞĞĞ’Ğ†Ğ“ĞĞ¦Ğ†Ğ‡ (SCROLL & ACTIVE STATE)
// ====================================

navItems.forEach(item => {
Â  Â  item.addEventListener('click', (e) => {
Â  Â  Â  Â  e.preventDefault(); 
Â  Â  Â  Â  
Â  Â  Â  Â  const targetId = e.target.getAttribute('href'); 
Â  Â  Â  Â  const targetSection = document.querySelector(targetId);

Â  Â  Â  Â  if (targetSection) {
Â  Â  Â  Â  Â  Â  // ĞŸĞ»Ğ°Ğ²Ğ½Ğ° Ğ¿Ñ€Ğ¾ĞºÑ€ÑƒÑ‚ĞºĞ° Ğ´Ğ¾ Ñ€Ğ¾Ğ·Ğ´Ñ–Ğ»Ñƒ
Â  Â  Â  Â  Â  Â  window.scrollTo({
Â  Â  Â  Â  Â  Â  Â  Â  top: targetSection.offsetTop - 70, 
Â  Â  Â  Â  Â  Â  Â  Â  behavior: 'smooth'
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ ĞºĞ»Ğ°ÑÑƒ Ğ¾Ğ´Ñ€Ğ°Ğ·Ñƒ Ğ¿Ñ–ÑĞ»Ñ ĞºĞ»Ñ–ĞºÑƒ
Â  Â  Â  Â  navItems.forEach(i => i.classList.remove('active'));
Â  Â  Â  Â  e.target.classList.add('active');

Â  Â  Â  Â  // Ğ¡ĞºĞ¸Ğ´Ğ°Ğ½Ğ½Ñ ÑÑ‚Ğ°Ğ½Ñƒ Ğ¿Ğ¾ÑˆÑƒĞºÑƒ Ğ¿Ñ€Ğ¸ Ğ·Ğ¼Ñ–Ğ½Ñ– Ñ€Ğ¾Ğ·Ğ´Ñ–Ğ»Ñƒ
Â  Â  Â  Â  searchInput.value = '';
Â  Â  Â  Â  productsData.forEach(p => p.cardElement.style.display = 'flex'); 
Â  Â  Â  Â  const noResults = document.getElementById('no-results-message');
Â  Â  Â  Â  if (noResults) {
Â  Â  Â  Â  Â  Â  noResults.remove();
Â  Â  Â  Â  }
Â  Â  });
});

// Ğ”Ğ¾Ğ´Ğ°Ñ‚ĞºĞ¾Ğ²Ğ° Ğ»Ğ¾Ğ³Ñ–ĞºĞ°: Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ Ğ°ĞºÑ‚Ğ¸Ğ²Ğ½Ğ¾Ğ³Ğ¾ ÑÑ‚Ğ°Ğ½Ñƒ Ğ½Ğ°Ğ²Ñ–Ğ³Ğ°Ñ†Ñ–Ñ— Ğ¿Ñ€Ğ¸ Ğ¿Ñ€Ğ¾ĞºÑ€ÑƒÑ‡ÑƒĞ²Ğ°Ğ½Ğ½Ñ– ÑÑ‚Ğ¾Ñ€Ñ–Ğ½ĞºĞ¸
// ĞŸÑ€Ğ¸Ğ¼Ñ–Ñ‚ĞºĞ°: productSections Ğ¼Ñ–ÑÑ‚Ğ¸Ñ‚ÑŒ ĞºĞ¾Ñ€ĞµĞºÑ‚Ğ½Ñ– ĞµĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¸ DOM (Ğ²Ğ¶Ğµ Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾ Ğ¿Ñ€Ğ¸ Ñ–Ğ½Ñ–Ñ†Ñ–Ğ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ—)
window.addEventListener('scroll', () => {
Â  Â  let current = '';

Â  Â  productSections.forEach(section => {
Â  Â  Â  Â  const sectionTop = section.offsetTop;
Â  Â  Â  Â  if (pageYOffset >= sectionTop - window.innerHeight * 0.3) { 
Â  Â  Â  Â  Â  Â  current = '#' + section.getAttribute('id');
Â  Â  Â  Â  }
Â  Â  });

Â  Â  navItems.forEach(item => {
Â  Â  Â  Â  item.classList.remove('active');
Â  Â  Â  Â  if (item.getAttribute('href') === current) {
Â  Â  Â  Â  Â  Â  item.classList.add('active');
Â  Â  Â  Â  }
Â  Â  });
});


// ====================================
// 5. Ğ†ĞĞ†Ğ¦Ğ†ĞĞ›Ğ†Ğ—ĞĞ¦Ğ†Ğ¯ ĞŸĞ Ğ˜ Ğ—ĞĞ’ĞĞĞ¢ĞĞ–Ğ•ĞĞĞ† Ğ¡Ğ¢ĞĞ Ğ†ĞĞšĞ˜
// ====================================
window.onload = () => {
Â  Â  initializeProductsData();
Â  Â  updateCartIcon();
};
